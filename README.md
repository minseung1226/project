# Home And Room Project
#### 부동산 웹 프로젝트
![제목 없음](https://github.com/minseung1226/project/assets/102594142/5083d8eb-b61f-40bb-bf4f-acb700f73fd5)
__Home And Room__ 프로젝트는 기존의 부동산 중개 사이트와는 다른 접근 방식을 가진 부동산 웹 어플리케이션입니다. 우리의 서비스는 부동산과 임차인 간의 중개 없이, 
직접적인 연결을 지원합니다. 임대인이 매물을 등록하고 임차인이 문의를 하여 매칭되는 형식으로 서비스가 진행됩니다. 더 나아가, 우리는 __계약서 폼을 제공하여 사용자들이 편리하게 필요한 계약서를 작성하고 생성할 수 있도록 지원합니다.__
<br/><br/><br/><br/><br/>

## 📆프로젝트 기간
2023.04.28~2023.08.19

<br/><br/><br/><br/><br/>

## ♣️기술스택
- **프론트앤드** : HTML , CSS , JavaScript , Thymeleaf( 부트스트랩등 활용)
- **백앤드** : Java17 , Spring Boot
- **데이터 베이스** : H2,MySql , SpringDataJPA,QueryDsl
- **API** : 카카오 맵 API,카카오 로그인  API
- **PDF 생성** : iText 라이브러리 사용
- **SMS 전송** : cool sms api 사용

<br/><br/><br/><br/><br/>

## 💾엔티티 설계
![도메인엔티티](https://github.com/minseung1226/project/assets/102594142/e810b601-b625-4f1e-bb4c-a87822253902)

<br/><br/><br/><br/><br/>

## 💽데이터 베이스 ERD
![ERD](https://github.com/minseung1226/project/assets/102594142/8ef8a1c5-69c3-4c36-8856-dee42a235a6d)

<br/><br/><br/><br/><br/>

## 프로젝트 결과
### 🏡홈페이지
![home](https://github.com/minseung1226/project/assets/102594142/a6e90e3f-cf59-4baa-9288-cbdf5cc7bc04)
![home2](https://github.com/minseung1226/project/assets/102594142/429b76e4-b256-44d3-af05-2c3d14b9888b)
- **카카오 맵 API**
    - 홈페이지는 카카오 맵 API를 활용하여 부동산 매물을 지도상에 표시합니다. 이를 통해 이용자는 지도에서 매물들의 위치를 시각적으로 확인할 수 있습니다.
    - 클러스터러를 사용하여 지도 상에 여러 매물이 밀집되어 있는 경우 사용자에게 직관적으로 보여줍니다.
- **Ajax를 통한 실시간 업데이트**
    - 지도를 드래그하거나 확대/축소할 때마다 Ajax를 사용하여 해당 영역에 위치한 매물들을 동적으로 불러와 지도에 업데이트 합니다.
    - 이 기능을 통해 사용자든 지도를 움직일 때마다 실제 매물 정보를 즉시 확인할 수 있습니다.
- **필터와 검색**
    - Ajax를 통해 업데이트를 할 때 위도 경도 뿐만 아니라 검색어,상세 필터에 대한 정보까지 서버에 요청해서 사용자가 원하는 매물들을 검색 할 수 있습니다.-
<br/><br/><br/>


### ✔️로그인
![login1](https://github.com/minseung1226/project/assets/102594142/e0ea5298-25b1-4659-a200-1323ecb8482d)
![kakaoLogin](https://github.com/minseung1226/project/assets/102594142/c6fbad5d-ed9c-48c5-af1b-2b27e2915bbf)
- **일반 로그인**
    - 사용자가 로그인을 시도하면 입력한 아이디와 비밀번호를 AJAX 비동기 통신으로 서버에 전송하고 서버에서 회원인지의 여부를 체크한 후 로그인 합니다.
    - 로그인을 할 때 세션에 사용자의 고유 ID값을 저장합니다. 이를 통해 사용자는 세션이 유지되는 동안 다양한 기능을 편리하게 이용할 수 있습니다.
- **카카오 로그인**
    - 카카오 로그인 이미지를 클릭 시 어플리케이션은 카카오 로그인 API를 호출하여 사용자를 인증합니다.
    - 로그인에 성공하면 카카오 서버는 어플리케이션으로 redirect하게 되고, 코드를 함께 제공합니다.
    - 어플리케이션 서버에서는 받은 카카오 서버로 받은 code를 보내서 Access Token을 발급받습니다.
    - Access Token을 이용해서 로그인할 때 동의한 정보들을 받습니다.
    - 제공받은 정보중 고유 id 값이 있는데 이 값이 데이터베이스에 있다면 로그인을 하게 되고, 없다면 데이터 베이스에 저장한 후 로그인을 하게 됩니다.
<br/><br/><br/>


### ✅회원가입
![join](https://github.com/minseung1226/project/assets/102594142/a96a8a19-31ee-4b2e-83bd-646cede40570)
- **클라이언트 검증**
    - 사용자가 회원가입 양식을 작성하면, 클라이언트 측에서 기본적인 검증을 수행합니다. 클라이언트에서 검증이 성공하면, ajax 비동기 방식으로 서버에 회원가입 요청을 보냅니다.
- **서버 측 검증**
    - 서버는 클라이언트에서 온 정보들을 다시한번 검증합니다. 검증에 실패하면 오류메시지를 반환하고, 검증에 성공하면 데이터베이스에 저장합니다.
- **클라이언트 응답**
    - 회원가입에 실패했을 경우 사용자에게 오류 메시지를 보여줍니다.
    - 회원가입에 성공했을 경우 회원가입이 완료되었다는 메시지를 사용자에게 보여준 후 홈페이지로 이동합니다.
<br/><br/><br/>

### 📐매물 상세 정보
![roomInfo](https://github.com/minseung1226/project/assets/102594142/726bf7be-33f2-4ac1-a4ef-1da1861dabdd)
- **Form 객체 사용**
    - Form 객체를 사용해서 사용자에게 보여줄 수 있는 매물의 정보들만 담아서 보여줍니다.
- **매물의 위치 표시**
    - 매물의 주소와 카카오맵 API를 사용해서 매물의 위치를 마커로 표시합니다.
<br/><br/><br/>

### 🧿문의하기와 찜하기
![InquiryAndWishlist](https://github.com/minseung1226/project/assets/102594142/4cfdf674-ec7f-4261-a3cc-62d052512b2d)
- **문의하기**
    - **로그인 상태 확인** : 사용자가 문의하기 버튼을 클릭했을 때 ,사용자가 로그인한 상태인지 확    인하고 로그인 되지 않은 사용자라면 로그인 모달 창을 띄웁니다.
    - **문의 확인 창** : 로그인이 된 사용자의 경우 임대인에게 사용자의 전화번호가 노출되는 것을 동의받는 확인 창을 띄웁니다.
    - **문의 문자 전송** : 확인을 누르게 될 경우 임대인의 번호로 cool sms 라이브러리를 사용해서 문의 문자 메시지가 전송됩니다.
- **찜 하기**
    - **실시간 찜 상태 확인** : 상세 페이지 진입 시 ,Ajax를 사용하여 서버에 현재 사용자가 해당 매물을 찜한 상태인지 확인하고 찜 유무에 따라 하트의 이미지가 변경됩니다.
    - **로그인 상태 확인** : 사용자가 찜하기 버튼을 클릭했을 때 ,사용자가 로그인한 상태인지 확    인하고 로그인 되지 않은 사용자라면 로그인 모달 창을 띄웁니다.
    - **찜하기 및 찜 해제** : 사용자가 하트 아이콘을 클릭하면 , 현재 매물의 찜 상태를 반대로 변경합니다. 만약 사용자가 찜한 매물이라면 서버에 요청을 보내 데이터베이스에서 찜한 매물을 삭제합니다. 찜하지 않은 매물이라면 데이터베이스에 찜한 매물의 정보를 저장합니다.
 <br/><br/><br/>
  
## ⭐마이페이지 - 계정변경
![mypage_account](https://github.com/minseung1226/project/assets/102594142/e285e2a4-317b-486b-ab06-dc665e5baaa2)
- **전화번호 변경**
    - 사용자가 전화번호를 입력하고 인증번호 전송 버튼을 클릭하면 클라이언트에서 입력한 전화번호를 서버로 전송합니다.
    - 서버는 cool sms 라이브러리를 사용해서 생성한 인증번호를 해당 전화번호로 전송합니다.
    - 클라이언트는 인증번호를 입력하고 서버에서 받은 인증번호와 사용자가 입력한 인증번호를 비교하여 일치 여부를 판단합니다.
    - 인증이 완료되면 전화번호 입력필드를 비활성화 하고, 숨겨진 Input 핗드에 인증완료 된 전화번호를 저장합니다.
- **주소 변경**
    - 주소는 Daum 우편번호 API를 활용하여 편리하게 처리합니다. 사용자는 우편번호 찾기 버튼을 클릭하여 주소 모달을 띄울 수 있습니다.
- **프로필 정보 변경**
    - 프로필 사진, 이름, 생년월일 등 정보를 변경할 수 있는 폼을 제공합니다. 사용자가 변경한 정보를 서버로 전송하고, 서버에서는 검증 후 정보를 업데이트 합니다.
- **비밀번호 변경**
    - 다른 정보 변경 폼 이외의 별도의 폼을 제공합니다. 클라이언트에서는 비밀번호와 비밀번호 확인 필드의 일치 여부를 검증하고 일치하는 경우 서버로 보내서 비밀번호를 변경합니다.
 
<br/><br/><br/>

## ☀️마이페이지-문의목록,찜목록
![inquiry](https://github.com/minseung1226/project/assets/102594142/cd660759-b93f-41c6-b6fc-904d6d046448)
- 찜 ,문의 엔티티에서 로그인한 사용자의 id 값과 일치하는 데이터들을 가져옵니다.
- 자바스크립트를 사용해서 전체선택 ,선택 해제 기능을 추가했고, 삭제 버튼을 누르면 선택한 매물들을 삭제합니다.


<br/><br/><br/>

## ✉️ 매물 등록
![room_registration](https://github.com/minseung1226/project/assets/102594142/8961797e-9237-4699-a0cf-3abf81a47d79)
- **인증확인**
    - 매물등록은 로그인한 사용자만 가능하도록 제한합니다. 로그인하지 않은 사용자는 로그인 모달을 띄웁니다.
- **주소 입력**
    - Daum 우편번호 API를 활용하여 주소입력을 편리하게 처리합니다.
    - 선택한 주소는 주소칸에 자동으로 채워집니다.
- **주소 기반 위치 표시**
    - 자동으로 채워진 주소를 기반으로 카카오 맵 API를 활용하여 해당 주소의 위치를 지도에 표시합니다.
- **날짜 선택**
    - Flatpickr 라이브러리를 사용해서 사용자가 쉽게 날짜를 선택할 수 있는 날짜 입력 필드를 제공합니다.
- **면적 입력**
    - 면적 입력란은 제곱미터 형식으로 면적을 입력받고, 입력시 실시간으로 오른쪽에 평수로 변환된 값을 보여줍니다.
- **매물 등록**
    - 모든 정보를 입력하고 매물등록 버튼을 누르면 클라이언트에서 한번, 서버에서 한번 검증을 거친 후 데이터를 저장합니다.


<br/><br/><br/>

## 🏴󠁧󠁢󠁳󠁣󠁴󠁿매물 관리
![room_modify](https://github.com/minseung1226/project/assets/102594142/561a1713-bf6d-463a-98ad-b27a68be1936)
- **매물 관리**
    - 매물 관리 페이지로 이동하게 되면 사용자가 등록한 매물들의 요약정보가 표시됩니다.
    - 매물은 목록 형태로 나열되어 있어 사용자가 빠르게 확인할 수 있습니다.
- **매물 상세 정보**
    - 매물 목록에서 각각의 매물을 클릭하면 해당 매물의 상세 정보를 볼 수 있는 페이지로 이동합니다.
- **매물 수정**
    - 매물 상세 정보 페이지에서 수정 버튼을 누르면 매물 정보를 수정할 수 있는 페이지로 이동합니다.
    - 수정 페이지에서 매물의 정보를 수정할 수 있습니다. 여기서 매물의 거래상태를 변경할 수 있습니다. (거래중 → 거래 완료)
- **매물 삭제**
    - 매물 상세정보 페이지에서 사겢 버튼을 누르면 해당 매물을 삭제할 수 있습니다.
    - 삭제하기 전에 사용자에게 확인 메시지를 보여주어 실수를 방지합니다.
    - 매물 삭제시 이미지 파일은 로컬에서 삭제되며,데이터베이스에서는 해당 매물의 상태를 “DELETE”로 변경합니다.


<br/><br/><br/>

## 🔵 계약서 등록
![contract_registration](https://github.com/minseung1226/project/assets/102594142/86b712c6-a074-4f86-bda9-054ab5cb0be4)
- **기본 정보 입력**
    - 사용자는 계약서를 등록하기 위해 필요한 정보들을 입력합니다. 이정보에는 계약일자, 계약 종류 , 임대인 임차인 정보 등이 있습니다.
    - 날짜 필드들은 flatpickr 라이브러리를 사용하여 사용자가 쉽게 날짜를 선택할 수 있도록 구현하였습니다.
- **필수 필드 검증**
    - 클라이언트 서버 측에서 검증을 통해 필드들의 유효성 체크를 합니다.
- **저장**
    - 서버에서는 추가적인 검증을 수행하고, 문제가 없다면 계약서 정보를 데이터베이스에 저장합니다.
    - 저장이 성공하면 매물관리 페이지로 이동합니다.

<br/><br/><br/>
 

## 🟣 계약서 관리와 다운로드
![contract_management](https://github.com/minseung1226/project/assets/102594142/1df14dd8-f880-4548-9f3c-67224355609b)
- **계약서 목록 표시**
    - 사용자는 계약서 관리 페이지로 이동하여 자신이 등록한 계약서 목록을 확인할 수 있습니다.
    - 각계약서에는 요약정보가 표시됩니다.
- **계약서 상세정보**
    - 계약서 목록에서 각각의 계약서를 클릭하면 해당 계약서의 상세정보 페이지로 이동할 수있습니다. 상세 정보페이지에는 계약일자,종류,상대방 정보계약 내용등이 표시됩니다.
- **계약서 수정 및삭제**
    - 사용자는 계약서 상세 정보 페이지에서 계약서를 수정하거나 삭제할 수 있습니다. 수정 페이지에서는 계약 일자, 종류, 상대방 정보 등을 수정할 수 있습니다. 삭제하기 전에 사용자에게 확인 메시지를 표시하여 실수를 방지합니다.
- **계약서 다운로드**
    - 사용자가 pdf 다운 버튼을 클릭하면 클라이언트에서 서버로 요청이 전송됩니다.
    - 서버에서는 iTextPdf 라이브러리를 사용하여 해당 계약서의 정보를 pdf형식으로 변환합니다.
    - pdf 를 생성하고 클라이언트에게 반환하여 다운로드할 수 있도록 합니다.


## 기타 기능
### ☑️스프링 AOP
- 스프링 AOP를 이용해서 로그추적기를 적용하였습니다.
- 애플리케이션 내에서 메서드 호출 및 예외를 추적합니다. 이를 통해 각 사용자 또는 요청에 대한 고유한 식별자 및 로그 레벨을 할당하여 로그를 효율적으로 관리하고 오류를 디버깅할 수 있습니다.

### ✔️스프링 Interceptor
- 로그인이 필요한 요청이 들어올 경우 로그인 여부를 체크하고, 로그인하지 않은 사용자의 요청일 경우 핸들러 메서드를 실행하지 않고 지정된 페이지로 리다이렉트 합니다.
- Spring의 HandlerInterceptor를 구현하여 사용자의 로그인 여부를 체크합니다.

* * *
**페이지별 상세 코드** : 
[Notion](https://www.notion.so/Home-And-Room-Project-a0a1c6126b1e47ccb1df2001c41035b1?pvs=4)

